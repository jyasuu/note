Great question! **Short answer:**  
Use the **`allowedRoutes.namespaces.from: Selector`** on the Gateway listener and match **labels**, *not* names. Kubernetes label selectors cannot match `metadata.name`, so you’ll whitelist namespaces by **adding labels to those namespaces** and selecting them. [\[gateway-ap...igs.k8s.io\]](https://gateway-api.sigs.k8s.io/guides/multiple-ns/), [\[gateway-api.f5se.io\]](https://gateway-api.f5se.io/guides/allowedroutes/)

***

## What the spec allows

*   **Route attachment control** lives on the Gateway listener’s `allowedRoutes`. You can set:
    *   `from: Same | All | Selector`
    *   If you choose `Selector`, the field is a **Kubernetes LabelSelector** (supports `matchLabels` and `matchExpressions`). It only works with **labels**, not resource names. [\[gateway-ap...igs.k8s.io\]](https://gateway-api.sigs.k8s.io/guides/multiple-ns/), [\[gateway-api.f5se.io\]](https://gateway-api.f5se.io/guides/allowedroutes/)
*   For **cross‑namespace references** (Routes → Services or Gateways → Secrets), `ReferenceGrant` in the *target* namespace also restricts by **a single namespace field**, not a selector—one grant per trusted namespace. (Design choice to avoid broad, insecure grants.) [\[gateway-ap...igs.k8s.io\]](https://gateway-api.sigs.k8s.io/api-types/referencegrant/)

***

## Practical pattern: “select by name” via labels

Since you can’t match `metadata.name`, the common practice is to **label namespaces with a value that reflects the name** (or a group) and then select by that label.

### 1) Label the namespaces

```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: app-a
  labels:
    dmz-attach: app-a

---
apiVersion: v1
kind: Namespace
metadata:
  name: app-b
  labels:
    dmz-attach: app-b
```

### 2) Gateway listener uses a selector

**Option A — exact list of namespaces** (set-based label selector):

```yaml
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: shared-perimeter
  namespace: dmz
spec:
  gatewayClassName: perimeter
  listeners:
    - name: https
      port: 443
      protocol: HTTPS
      allowedRoutes:
        namespaces:
          from: Selector
          selector:
            matchExpressions:
              - key: dmz-attach
                operator: In
                values: ["app-a", "app-b"]   # explicitly whitelisted namespaces
        kinds:
          - kind: HTTPRoute
```

**Option B — group membership** (one label for many namespaces):

```yaml
# mark all namespaces allowed to attach
apiVersion: v1
kind: Namespace
metadata:
  name: app-c
  labels:
    attach-to-dmz: "true"

# listener allows any namespace with attach-to-dmz=true
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: shared-perimeter
  namespace: dmz
spec:
  gatewayClassName: perimeter
  listeners:
    - name: https
      port: 443
      protocol: HTTPS
      allowedRoutes:
        namespaces:
          from: Selector
          selector:
            matchLabels:
              attach-to-dmz: "true"
        kinds:
          - kind: HTTPRoute
```

> This is the recommended way to **safely share a Gateway** across namespaces: the DMZ gateway owner defines a tight selector for who may attach; route owners still must explicitly attach via `parentRefs`. [\[gateway-ap...igs.k8s.io\]](https://gateway-api.sigs.k8s.io/guides/multiple-ns/)

***

## Notes & gotchas

*   **You cannot select by namespace name** directly; Kubernetes selectors do not support `metadata.name`. Use labels. [\[gateway-ap...igs.k8s.io\]](https://gateway-api.sigs.k8s.io/guides/multiple-ns/)
*   **`ReferenceGrant`**:
    *   Uses **one `namespace` per `from`** (no selector). Create multiple grants if you must trust multiple namespaces. This is intentional for security. [\[gateway-ap...igs.k8s.io\]](https://gateway-api.sigs.k8s.io/api-types/referencegrant/)
*   Make sure your **controller** supports the Gateway API features you use. The `allowedRoutes` selector pattern is part of conformance; examples and guidance are in the official cross‑namespace routing docs and vendor guides. [\[gateway-ap...igs.k8s.io\]](https://gateway-api.sigs.k8s.io/guides/multiple-ns/), [\[gateway-api.f5se.io\]](https://gateway-api.f5se.io/guides/allowedroutes/)

***

If you want, I can generate a **ready‑to‑apply patch** for your cluster that:

*   Adds the labels to the namespaces you specify by name, and
*   Updates your DMZ gateway listener with the proper `matchExpressions` so only those namespaces can attach.
